<% if subcategories.any? %>
  <div>
    <label class="block text-md font-semibold text-indigo-600 mb-3">
      Subcategories<span class="text-md text-red-600">*</span>
    </label>
    
    <div class="space-y-2 max-h-40 overflow-y-auto">
      <% subcategories.each do |subcategory| %>
        <label class="flex items-center space-x-2 cursor-pointer hover:bg-blue-50 p-2 rounded">
          <input type="checkbox" 
                 name="user[subcategories][]" 
                 value="<%= subcategory %>"
                 <%= 'checked' if current_user&.subcategories&.include?(subcategory) %>
                 class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
          <span class="text-sm text-gray-700"><%= subcategory %></span>
        </label>
      <% end %>
    </div>
  </div>
<% end %>